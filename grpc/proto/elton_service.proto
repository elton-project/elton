syntax = "proto3";

package proto;

import "google/api/annotations.proto";

service EltonService {
	rpc GenerateObjectID(ObjectName) returns (stream ObjectInfo) {
		option (google.api.http) = {
		       put: "/generate/object_id"
		       body: "*"
		};
	};
	rpc CreateObjectInfo(ObjectInfo) returns (stream ObjectInfo) {
		option (google.api.http) = {
		       put: "/{delegate}/{object_id}/{version}"
		};
	};
	rpc GetObject(ObjectInfo) returns (stream Object) {
		option (google.api.http) = {
		       get: "/{delegate}/{object_id}/{version}"
		};
	};
	rpc PutObject(Object) returns (EmptyMessage) {};
	rpc DeleteObject(ObjectInfo) returns (EmptyMessage) {
		option (google.api.http) = {
		       delete: "/{delegate}/{object_id}/{version}"
		};
	};
}

message ObjectName {
	repeated string names = 1;
}

message ObjectInfo {
	string object_id = 1;
	uint64 version = 2;
	string delegate = 3;
	string request_hostname = 4;
}

message Object {
	string body = 1;
}

message EmptyMessage {
}
